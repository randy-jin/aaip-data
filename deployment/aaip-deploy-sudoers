# Sudoers configuration for AAIP deployment automation
# Install this file to: /etc/sudoers.d/aaip-deploy
# Commands:
#   sudo cp /home/randy/deploy/aaip-data/deployment/aaip-deploy-sudoers /etc/sudoers.d/aaip-deploy
#   sudo chmod 440 /etc/sudoers.d/aaip-deploy
#   sudo visudo -c  # Validate syntax

# Allow randy to manage aaip-backend-test service without password
randy ALL=(ALL) NOPASSWD: /bin/systemctl start aaip-backend-test
randy ALL=(ALL) NOPASSWD: /bin/systemctl stop aaip-backend-test
randy ALL=(ALL) NOPASSWD: /bin/systemctl restart aaip-backend-test
randy ALL=(ALL) NOPASSWD: /bin/systemctl status aaip-backend-test
randy ALL=(ALL) NOPASSWD: /bin/systemctl daemon-reload
randy ALL=(ALL) NOPASSWD: /bin/systemctl enable aaip-backend-test

# Allow randy to manage aaip-scraper service and timer
randy ALL=(ALL) NOPASSWD: /bin/systemctl start aaip-scraper.service
randy ALL=(ALL) NOPASSWD: /bin/systemctl stop aaip-scraper.service
randy ALL=(ALL) NOPASSWD: /bin/systemctl status aaip-scraper.service
randy ALL=(ALL) NOPASSWD: /bin/systemctl start aaip-scraper.timer
randy ALL=(ALL) NOPASSWD: /bin/systemctl stop aaip-scraper.timer
randy ALL=(ALL) NOPASSWD: /bin/systemctl restart aaip-scraper.timer
randy ALL=(ALL) NOPASSWD: /bin/systemctl status aaip-scraper.timer
randy ALL=(ALL) NOPASSWD: /bin/systemctl enable aaip-scraper.timer
randy ALL=(ALL) NOPASSWD: /bin/systemctl disable aaip-scraper.timer

# Allow randy to copy frontend files to web directory
randy ALL=(ALL) NOPASSWD: /bin/cp -r * /var/www/aaip-test/*
randy ALL=(ALL) NOPASSWD: /bin/cp * /var/www/aaip-test/*

# Allow randy to manage nginx
randy ALL=(ALL) NOPASSWD: /bin/systemctl restart nginx
randy ALL=(ALL) NOPASSWD: /bin/systemctl reload nginx
randy ALL=(ALL) NOPASSWD: /bin/systemctl status nginx
randy ALL=(ALL) NOPASSWD: /usr/sbin/nginx -t

# Allow randy to view logs
randy ALL=(ALL) NOPASSWD: /bin/journalctl -u aaip-backend-test *
randy ALL=(ALL) NOPASSWD: /bin/journalctl -u nginx *
